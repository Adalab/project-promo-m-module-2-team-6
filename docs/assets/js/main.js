"use strict";const collapsibleHeaders=document.querySelectorAll(".js-collapsible-header"),collapsibleBox=document.querySelectorAll(".js-collapsible"),arrow=document.querySelectorAll(".js-arrow");for(const e of collapsibleHeaders)e.addEventListener("click",switchCollapsible);function switchCollapsible(e){const t=e.currentTarget,o=document.querySelectorAll(".js-collapsible");for(let e=0;e<o.length;e++)t===collapsibleHeaders[e]?(arrow[e].classList.toggle("fa-chevron-up"),collapsibleBox[e].classList.toggle("collapsible--close")):(collapsibleBox[e].classList.add("collapsible--close"),arrow[e].classList.remove("fa-chevron-up"),arrow[e].classList.add("fa-chevron-down"))}const fillForm=document.querySelector(".js-fillform"),photoFullName=document.querySelector(".js-photoFullName"),photoJob=document.querySelector(".js-photoJob"),photoEmail=document.querySelector(".js-photoEmail"),photoLinkedin=document.querySelector(".js-photoLinkedin"),photoGitHub=document.querySelector(".js-photoGithub"),photoPhone=document.querySelector(".js-photoPhone");let formElement={palette:"1",name:"Nombre Apellido",job:"Front-end developer",photo:"https://github.com/Adalab/project-promo-m-module-2-team-6/blob/main/src/images/vegan-deburguer-photo.jpg",email:"",linkedin:"",phone:"",github:"https://github.com/"};function newPhotoElements(){photoFullName.innerText=formElement.name,photoJob.innerText=formElement.job,photoEmail.href=formElement.email,photoLinkedin.href+=formElement.linkedin,photoGitHub.href+=formElement.github,photoPhone.href=formElement.phone}function onFormKeyUp(e){const t=e.target;formElement[t.name]=t.value,saveInLocalStorage()}function handlerFormKeyUp(e){onFormKeyUp(e),console.log(formElement),newPhotoElements(),getFromLocalStorage()}function updateAllInputs(e){document.querySelector(".js-fullName").value=e.name,document.querySelector(".js-fillJob").value=e.job,document.querySelector(".js-input-email").value=e.email,document.querySelector(".js-input-phone").value=e.phone,document.querySelector(".js-input-linkedin").value=e.linkedin,document.querySelector(".js-input-github").value=e.github}fillForm.addEventListener("keyup",handlerFormKeyUp);const boxNameJob=document.querySelector(".section__photo--boxnamejob"),photoLinks=document.querySelectorAll(".section__photo--link");function resetPalette(){console.log(photoFullName.classList),photoFullName.classList.remove("color-palette-g1","color-palette-b1","color-palette-r1"),boxNameJob.classList.remove("border-palette-r2","border-palette-g2","border-palette-b2");for(const e of photoLinks)e.classList.remove("border-palette-g3","border-palette-r3","border-palette-b3")}const form=document.querySelector(".main-cards__form");function onFormChange(e){if("design-color"===e.target.name){resetPalette();const t=e.target.value;console.log(t),"g"===t?formElement.palette="1":"r"===t?formElement.palette="2":"b"===t&&(formElement.palette="3"),saveInLocalStorage(),updatePalette(t)}}function updatePalette(e){photoFullName.classList.add(`color-palette-${e}1`),boxNameJob.classList.add(`border-palette-${e}2`);for(const t of photoLinks)t.classList.add(`border-palette-${e}3`)}function handlePalette(e){let t;document.querySelector(".js-colorPalette"+e).checked=!0,"1"===e?t="g":"2"===e?t="r":"3"===e&&(t="b"),updatePalette(t)}form.addEventListener("change",onFormChange);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",()=>writeImage(fr.result)),fr.readAsDataURL(t)}function writeImage(e){updatePhoto(e),formElement.photo=e,saveInLocalStorage()}function fakeFileClick(){fileField.click()}function updatePhoto(e){profileImage.style.backgroundImage=`url(${e})`,profilePreview.style.backgroundImage=`url(${e})`}function onResetClickForm(){form.reset(),formElement={name:"Nombre Apellido",job:"Front-end developer",email:"",linkedin:"",phone:"",github:"",photo:"./assets/images/vegan-deburguer-photo.jpg"},writeImage(formElement.photo),newPhotoElements(),resetPalette()}fileField.addEventListener("change",getImage);const buttonReset=document.querySelector(".js-photoReset");function saveInLocalStorage(){const e=JSON.stringify(formElement);localStorage.setItem("userData",e)}function getFromLocalStorage(){const e=localStorage.getItem("userData");if(null!==e){const t=JSON.parse(e);formElement=t,newPhotoElements(),updateAllInputs(t),handlePalette(t.palette),updatePhoto(t.photo)}}buttonReset.addEventListener("click",onResetClickForm),getFromLocalStorage();const createBtn=document.querySelector(".js-create-btn"),cardResult=document.querySelector(".js-card-link"),shareHidden=document.querySelector(".js-share-hidden"),formSubmit=document.querySelector(".js-submit"),twitterElement=document.querySelector(".js-twitter-btn"),twitterLinkElement=document.querySelector(".js-twitter-link");function handleCreateBtn(e){e.preventDefault(),fetchAPI(),shareHidden.classList.remove("js-share-hidden"),createBtn.classList.add("js-create-hidden"),createBtn.disabled=!0}function fetchAPI(){const e=formElement;fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{if(!0===e.success){e.cardURL;let t=e.cardURL;document.querySelector(".js-card-link").innerHTML=`<a href="${t}" class="share__result--link js-card-link" target="_blank">${t}</a>`}else cardResult.innerHTML="Debes cumplimentar todos los campos para poder crear tu enlace"})}function handleTwitterShare(){twitterLinkElement.href="https://twitter.com/?lang=es="+shareLink}createBtn.addEventListener("click",handleCreateBtn),twitterElement.addEventListener("click",handleTwitterShare);